(()=>{var e={818:()=>{function e(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}$((function(){var t=$(".online-online-payment__container"),n=$("#sylius-summary-grand-total").text(),r="online-payment__item--active",a=$("#sylius-summary-grand-total"),o=Boolean(t.data("components"));function i(){$("#bitbag-paymentFee-row").replaceWith(""),a.text(n)}$('input[id*="sylius_checkout_select_payment_"][type=radio]').on("change",(function(e){e.currentTarget.classList.contains("mollie-payments")||(i(),$(".".concat(r,' input[type="radio"]')).prop("checked",!1),$(".".concat(r)).removeClass(r))})),$(".online-payment__input").on("change",(function(e){var t,n=e.currentTarget,r=$(n).parent(".online-payment__item");r.siblings().removeClass("online-payment__item--active"),r.addClass("online-payment__item--active"),n.value,$(".mollie-payments").prop("checked")||$(".mollie-payments").prop("checked",!0),r.data("feeurl")&&(t=r.data("feeurl"),fetch(t).then((function(e){return e.json()})).then((function(e){var t=$("#bitbag-paymentFee-row");t.length&&e.view?(t.replaceWith(e.view),a.text(e.orderTotal)):e.view?($("#sylius-checkout-subtotal .ui.large.header").before(e.view),a.text(e.orderTotal)):i()})))})),t.length>0&&!0===o&&function(n){var r=t.data("environment"),a=!0;1===r&&(a=!1);var o=Mollie(t.data("profile_id"),{locale:t.data("locale"),testmode:a}),i=document.getElementsByName("sylius_checkout_select_payment")[0],c=document.getElementById("form-error"),u=document.getElementById("next-step")||document.getElementById("sylius-pay-link"),l=document.querySelector('[id*="_details_cartToken"]'),d=o.createComponent("cardHolder");d.mount("#card-holder");var s=document.getElementById("card-holder-error");d.addEventListener("change",(function(e){e.error&&e.touched?s.textContent=e.error:s.textContent=""}));var m=o.createComponent("cardNumber");m.mount("#card-number");var p=document.getElementById("card-number-error");m.addEventListener("change",(function(e){e.error&&e.touched?p.textContent=e.error:p.textContent=""}));var y=o.createComponent("expiryDate");y.mount("#expiry-date");var v=document.getElementById("expiry-date-error");y.addEventListener("change",(function(e){e.error&&e.touched?v.textContent=e.error:v.textContent=""}));var f=o.createComponent("verificationCode");f.mount("#verification-code");var h=document.getElementById("verification-code-error");function g(){u.disabled=!0}function b(){u.disabled=!1}f.addEventListener("change",(function(e){e.error&&e.touched?h.textContent=e.error:h.textContent=""})),i.addEventListener("submit",function(){var t,n=(t=regeneratorRuntime.mark((function e(t){var n,r,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("creditcard"!==$(".online-payment__input:checked").val()){e.next=21;break}return t.preventDefault(),g(),c.textContent="",e.next=6,o.createToken();case 6:if(n=e.sent,r=n.token,!(a=n.error)){e.next=14;break}return b(),c.textContent=a.message,i.classList.remove("loading"),e.abrupt("return");case 14:(u=document.createElement("input")).setAttribute("name","token"),u.setAttribute("type","hidden"),u.setAttribute("value",r),i.appendChild(u),l.value=r,i.submit();case 21:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(a,o){var i=t.apply(n,r);function c(t){e(i,a,o,c,u,"next",t)}function u(t){e(i,a,o,c,u,"throw",t)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}())}();var c=document.getElementById("applepay");c&&(window.ApplePaySession||ApplePaySession.canMakePayments())&&(c.style.display="block")}))},14:()=>{$((function(){var e=document.querySelector("#mollie_applepay_button");e&&ApplePaySession&&ApplePaySession.canMakePayments()&&(e.style.display="block"),e&&e.addEventListener("click",(function(e){!function(){var e=document.getElementById("mollie_applepay_button"),t=e.getAttribute("data-url-validate"),n=e.getAttribute("data-url-payment"),r=e.getAttribute("data-currency-order"),a=e.getAttribute("data-merchant-name"),o=e.getAttribute("data-total-order");o=(o/=100).toString();var i=new ApplePaySession(3,request("US",r,a,o));i.onvalidatemerchant=function(e){jQuery.ajax({url:t,method:"POST",data:{validationUrl:e.validationURL},success:function(e){!0===e.success?i.completeMerchantValidation(JSON.parse(e.data)):i.abort()},error:function(e,t,n){i.abort()}})},i.onpaymentauthorized=function(e){jQuery.ajax({url:n,method:"POST",data:{token:e.payment.token,shippingContact:e.payment.shippingContact,billingContact:e.payment.billingContact},success:function(e){var t=e.data;!0===e.success?(redirectionUrl=t.returnUrl,i.completePayment(t.responseToApple),window.location.href=redirectionUrl):i.completePayment(t)},error:function(e,t,n){i.abort()}})},i.begin()}()}))}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{"use strict";n(818),n(14)})()})();